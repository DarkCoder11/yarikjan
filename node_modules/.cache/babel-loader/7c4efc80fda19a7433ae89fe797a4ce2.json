{"ast":null,"code":"import axios from 'axios';\nimport dispatchSpinner from '../dispatchSpinner/dispatchSpinner';\nimport dispatchUsers from '../dispatchUsers/dispatchUsers';\nimport dispatchCourses from '../dispatchCourses/dispatchCourses';\n\nvar fetchUsers = function fetchUsers() {\n  var users = [];\n  var curses = [];\n  return function (dispatch) {\n    dispatch(dispatchSpinner(true));\n    axios.get('http://vidyaback.appelloproject.xyz/api/users/').then(function (response) {\n      // let reqCount = 0;\n      console.log(response.data.results, 'useri');\n      users.push(response.data.results); // reqCount++\n      // if(reqCount === response.data.results.length) {\n\n      dispatch(dispatchUsers(users)); // }\n\n      console.log(response.data.results, 'results');\n      var requestCount = 0;\n      response.data.results.forEach(function (element, index) {\n        axios.get(element.url).then(function (info) {\n          curses.push(info.data);\n          requestCount++;\n\n          if (requestCount === response.data.results.length) {\n            dispatch(dispatchCourses(curses));\n            dispatch(dispatchSpinner(false));\n          }\n        });\n      });\n    });\n  };\n};\n\nexport default fetchUsers;","map":{"version":3,"sources":["/Users/shelllogix/Desktop/vidya/src/store/actions/fetchUsers/fetchUsers.js"],"names":["axios","dispatchSpinner","dispatchUsers","dispatchCourses","fetchUsers","users","curses","dispatch","get","then","response","console","log","data","results","push","requestCount","forEach","element","index","url","info","length"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,eAAP,MAA4B,oCAA5B;AACA,OAAOC,aAAP,MAA0B,gCAA1B;AACA,OAAOC,eAAP,MAA4B,oCAA5B;;AAGA,IAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACvB,MAAIC,KAAK,GAAG,EAAZ;AACA,MAAIC,MAAM,GAAG,EAAb;AACA,SAAO,UAAAC,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACN,eAAe,CAAC,IAAD,CAAhB,CAAR;AACAD,IAAAA,KAAK,CAACQ,GAAN,CAAU,gDAAV,EACGC,IADH,CACQ,UAAAC,QAAQ,EAAI;AAEhB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,CAAcC,OAA1B,EAAkC,OAAlC;AACAT,MAAAA,KAAK,CAACU,IAAN,CAAWL,QAAQ,CAACG,IAAT,CAAcC,OAAzB,EAJgB,CAKhB;AACA;;AACEP,MAAAA,QAAQ,CAACL,aAAa,CAACG,KAAD,CAAd,CAAR,CAPc,CAQhB;;AACAM,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAAT,CAAcC,OAA1B,EAAkC,SAAlC;AACA,UAAIE,YAAY,GAAG,CAAnB;AACAN,MAAAA,QAAQ,CAACG,IAAT,CAAcC,OAAd,CAAsBG,OAAtB,CAA8B,UAACC,OAAD,EAAUC,KAAV,EAAoB;AAChDnB,QAAAA,KAAK,CAACQ,GAAN,CAAUU,OAAO,CAACE,GAAlB,EACGX,IADH,CACQ,UAAAY,IAAI,EAAI;AACZf,UAAAA,MAAM,CAACS,IAAP,CAAYM,IAAI,CAACR,IAAjB;AACAG,UAAAA,YAAY;;AACZ,cAAIA,YAAY,KAAKN,QAAQ,CAACG,IAAT,CAAcC,OAAd,CAAsBQ,MAA3C,EAAmD;AACjDf,YAAAA,QAAQ,CAACJ,eAAe,CAACG,MAAD,CAAhB,CAAR;AACAC,YAAAA,QAAQ,CAACN,eAAe,CAAC,KAAD,CAAhB,CAAR;AACD;AACF,SARH;AASD,OAVD;AAWD,KAvBH;AAwBD,GA1BD;AA2BD,CA9BD;;AAgCA,eAAeG,UAAf","sourcesContent":["import axios from 'axios';\nimport dispatchSpinner from '../dispatchSpinner/dispatchSpinner';\nimport dispatchUsers from '../dispatchUsers/dispatchUsers';\nimport dispatchCourses from '../dispatchCourses/dispatchCourses';\n\n\nconst fetchUsers = () => {\n  let users = [];\n  let curses = [];\n  return dispatch => {\n    dispatch(dispatchSpinner(true))\n    axios.get('http://vidyaback.appelloproject.xyz/api/users/')\n      .then(response => {\n        \n        // let reqCount = 0;\n        console.log(response.data.results,'useri')\n        users.push(response.data.results)\n        // reqCount++\n        // if(reqCount === response.data.results.length) {\n          dispatch(dispatchUsers(users))\n        // }\n        console.log(response.data.results,'results')\n        let requestCount = 0;\n        response.data.results.forEach((element, index) => {\n          axios.get(element.url)\n            .then(info => {\n              curses.push(info.data);\n              requestCount++;\n              if (requestCount === response.data.results.length) {\n                dispatch(dispatchCourses(curses))\n                dispatch(dispatchSpinner(false))\n              }\n            })\n        })\n      })\n  }\n}\n\nexport default fetchUsers"]},"metadata":{},"sourceType":"module"}